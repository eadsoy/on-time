import mapboxgl from "mapbox-gl";
const initMapbox = () => {
  const mapElement = document.getElementById("map");
  const userRoute = gon.route;
  console.log(userRoute);
  console.log("hello");

  // if (mapElement) {
  // only build a map if there's a div#map to inject into
  mapboxgl.accessToken = mapElement.dataset.mapboxApiKey;
  const map = new mapboxgl.Map({
    container: "map",
    style: "mapbox://styles/mapbox/streets-v10",
  });
  // let turfRoute = turf.lineString(route);
  map.on("load", function () {
    map.addLayer({
      id: "route",
      type: "line",
      source: {
        type: "geojson",
        data: {
          type: "Feature",
          properties: {},
          geometry: {
            type: "LineString",
            coordinates: userRoute,
          },
        },
      },
      layout: {
        "line-join": "round",
        "line-cap": "round",
      },
      paint: {
        "line-color": "#3b9ddd",
        "line-width": 8,
        "line-opacity": 0.8,
      },
    });
  });
};
// gon.start = @route.route.first
// gon.end = @route.route.last
// gon.route = @route.route
// gon.duration = @route.duration
// gon.distance = @route.distance
// };

export { initMapbox };

// adds the route as a layer on the map
// function addRoute (coords) {
// check if the route is already loaded

// }
